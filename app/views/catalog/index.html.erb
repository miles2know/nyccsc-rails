<div id="main-container" class="container full-width-container">

    <div class="col-md-12">
      <div class="pull-right">
        <a href="#">Selected <strong>Map it!</strong> Items (<span id="map-count">0</span>)</a>&nbsp;&nbsp;
        <button href="#" class="btn btn-default btn-xs map-toggle hide-map">Hide Map &raquo;</button>
      </div>
    </div>

    <div class="row vertical-offset-md">&nbsp;</div>
    
    <!--<div id="sidebar" class="col-md-2 pane ui-layout-west">-->
    <div id="sidebar" class="col-md-3 col-lg-2">
     <%= render 'search_sidebar' %>
    </div>

    <!--<div id="content" class="col-md-5 pane ui-layout-center">-->
    <div id="content" class="col-md-5 col-lg-6">

        <%= render 'search_and_constraints' %>

        <% unless has_search_parameters? %>
    	    <%# if there are no input/search related params, display the "home" partial -%>
          
    	    <%= render 'home' %>
        <% else %>

          <% # for mapping application %>
          <% #javascript_tag "var docs = #{documents.to_json};" %>

          <h2 class="sr-only top-content-title"><%= t('blacklight.search.search_results_header') %></h2>

          <% @page_title = t('blacklight.search.title', :application_name => application_name) %>


          <% content_for(:head) do -%>
            <%= render_opensearch_response_metadata %>
            <%= auto_discovery_link_tag(:rss, url_for(params.merge(:format => 'rss')), :title => t('blacklight.search.rss_feed') ) %>
            <%= auto_discovery_link_tag(:atom, url_for(params.merge(:format => 'atom')), :title => t('blacklight.search.atom_feed') ) %>
          <% end -%>


          <%= render 'search_header' %>

          <h2 class="sr-only"><%= t('blacklight.search.search_results') %></h2>

          <%- if @response.empty? %>
            <%= render "zero_results" %>
          <%- elsif render_grouped_response? %>
            <%= render_grouped_document_index %>
          <%- else %>
            <%= render_document_index %>
          <%- end %>

    	    <%= render 'results_pagination' %>

        <% end %>

    </div>

    <div class="col-md-4">
      
        <%= render 'map' %>
      
    </div>

    

</div>


<script type="text/javascript">

  $(document).ready(function() {

    //reset all 
    $("input.toggle_list").removeAttr("checked");
    var count = 0;

    //setup session variable to hold map it IDs and count?
    //for now it's a hack for count and there isn't a holding tank for IDs
    $(".toggle_list").each(function() {
      $(this).attr("id",($(this).parents('div.document').attr("docid")));
    });

    $("input.toggle_list").on("change", function() {
    
      //console.log($(this).attr("id"));
      if ($(this).is(':checked')) {
          count ++;
          $(this).next().html("Map it! Selected");
          $("#map-count").html(count.toString());
          
      } else {
          count --;
          $(this).next().html("Map it! Select");
          $("#map-count").html(count.toString());
      }
      
    });

   

  });

</script>


<% # for linked data requests %>
<%= javascript_include_tag 'linkedDataRequests' %>
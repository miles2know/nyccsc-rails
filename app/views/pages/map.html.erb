

    <div class="container">

      <div class="row">

      </div>
      
      <div class="row">
        
        <div class="col-sm-3">
          <div id="sidebar">

            <form role="search">
              <div class="form-group has-feedback">
                <div class="input-group">
                  <input id="searchbox" type="text" placeholder="Search Places" class="form-control">
                  <span class="input-group-addon"><i id="searchicon" class="fa fa-search form-control-feedback"></i></span>
                  <!-- <i id="searchicon" class="fa fa-search form-control-feedback"></i> -->
                </div>
              </div>
            </form>
          
            <div id="map-sidebar">
              <div class="panel panel-default">
                <div class="panel-heading">
                  <h6 class="panel-title">
                    <a data-toggle="collapse" data-target="#map-context-layers">Regional Context Layers</a>
                  </h6>
                </div>
                <div id="map-context-layers" class="panel-collapse collapse in">
                  <div class="panel-body">

                      <form role="form" id="context-layers">
                        <div class="radio">
                          <label><input type="radio" name="context-layers" data-name="Counties" data-layer="ny_county">Counties</label>
                        </div>
                        <div class="radio">
                          <label><input type="radio" name="context-layers" data-name="Watersheds" data-layer="ny_watershed">Watersheds</label>
                        </div>
                        <div class="radio">
                          <label><input type="radio" name="context-layers" data-name="DEC Regions" data-layer="ny_dec">DEC Regions</label>
                        </div>
                        <div class="radio">
                          <label><input type="radio" name="context-layers" data-name="DOT Regions" data-layer="ny_dot">DOT Regions</label>
                        </div>
                        <div class="radio">
                          <label><input type="radio" name="context-layers" data-name="Climate Divisions" data-layer="ny_clim_div">Climate Divisions</label>
                        </div>
                      </form>

                  </div>
                </div>
              </div><!-- .panel -->  
              
              <div id="map-selected-layers"></div>
            </div><!-- #map-sidebar -->
            
          </div><!-- #sidebar -->  
        </div><!--.col-sm-3 -->

        <div class="col-sm-9">
          <div id="map-container" data-spy="affix" data-offset-top="200" data-offset-bottom="220" >
            <div id="map" ></div>
            <div id="loading">
              <div class="loading-indicator">
                <div class="progress progress-striped active">
                  <div class="progress-bar progress-bar-info progress-bar-full"></div>
                </div>
              </div>
            </div>
          </div>
          

        </div><!-- .col-sm-9 -->
    
      </div><!-- .row -->

    </div><!-- #container -->

    

    <div class="modal fade" id="attributionModal" tabindex="-1" role="dialog">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button class="close" type="button" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h4 class="modal-title">
              Application by <a href='http://frontierspatial.com' target='_blank_'>frontierspatial.com</a>
            </h4>
           
          </div>
          <div class="modal-body">
            <div id="attribution"></div>
          </div>
        </div><!-- /.modal-content -->
      </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->
  
    <!-- requires leaflet and leaflet specific plugins -->
    <!-- // Map & Chart related GEMs 
         //= require leaflet
         //= require typeahead 
         //= require leaflet.markercluster 
        
         // Map & Chart related vendor JSs
         //= require L.groupedlayercontrol
         //= require L.Control.Locate 
         //= require esri.leaflet
         //= require topojson.js  -->

    <%= javascript_include_tag 'map/mapDataOverlays' %>
    <%= javascript_include_tag 'map/mapAddLeafletLayer' %>
    <%= javascript_include_tag 'map/mapSearch' %>
    
    
    <!-- custom data layers -->
    <%= javascript_include_tag 'map/frontier/alsc.js' %>
    <%= javascript_include_tag 'map/frontier/historicdeclarations_ny.js' %>
    <%= javascript_include_tag 'map/frontier/nfhl.js' %>
    <%= javascript_include_tag 'map/frontier/spdes.js' %>
    <%= javascript_include_tag 'map/frontier/usgs_streamflow.js' %>
    <!-- bring it all together now -->
    <%= javascript_include_tag 'map/frontier/app.js' %>

    <script>

      var contextLayer;

      //add context layer on click
      $("form#context-layers input[type=radio]").click(function(e) {

        //get selected layer
        var selectedContextLayer = $(this).data("name"); 

        if (map.hasLayer(contextLayer)) {
          map.removeLayer(contextLayer);
        }

        //loop through context layers array and get selected layer
        contextOverlays.forEach(function(i) {

          //add selected layer to map
          if (selectedContextLayer == i.data_name) {

            //if topojson
            if (i.data_source.indexOf("topojson") >= 0) {
              contextLayer = addTopoJsonPolygon(i.data_source,i.data_name,i.data_array).addTo(map);

            } 
            //if geojson
            else if (i.data_source.indexOf("geojson") >= 0) {
              contextLayer = addGeoJsonPolygon(i.data_source,i.data_name,i.data_array).addTo(map);
            //only setup to handle topojson and geojson 
            } else {
              //do nothing
            }
         }
        
        });
      
      });

    </script>

   
  </body>
</html>
